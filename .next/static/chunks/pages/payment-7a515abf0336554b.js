(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{485:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return n(7319)}])},1210:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDomainLocale=function(e,t,n,o){return!1};("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4941).Z;n(5753).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(2648).Z,s=n(7273).Z,i=a(n(7294)),r=n(6273),l=n(2725),c=n(3462),u=n(1018),d=n(7190),p=n(1210),f=n(8684),_={};function h(e,t,n,o){if(e&&r.isLocalURL(t)){Promise.resolve(e.prefetch(t,n,o)).catch((function(e){0}));var a=o&&"undefined"!==typeof o.locale?o.locale:e&&e.locale;_[t+"%"+n+(a?"%"+a:"")]=!0}}var y=i.default.forwardRef((function(e,t){var n,a=e.href,y=e.as,v=e.children,m=e.prefetch,g=e.passHref,C=e.replace,w=e.shallow,b=e.scroll,T=e.locale,j=e.onClick,x=e.onMouseEnter,P=e.onTouchStart,E=e.legacyBehavior,N=void 0===E?!0!==Boolean(!1):E,k=s(e,["href","as","children","prefetch","passHref","replace","shallow","scroll","locale","onClick","onMouseEnter","onTouchStart","legacyBehavior"]);n=v,!N||"string"!==typeof n&&"number"!==typeof n||(n=i.default.createElement("a",null,n));var O=!1!==m,S=i.default.useContext(c.RouterContext),L=i.default.useContext(u.AppRouterContext);L&&(S=L);var D,M=i.default.useMemo((function(){var e=o(r.resolveHref(S,a,!0),2),t=e[0],n=e[1];return{href:t,as:y?r.resolveHref(S,y):n||t}}),[S,a,y]),R=M.href,Z=M.as,A=i.default.useRef(R),I=i.default.useRef(Z);N&&(D=i.default.Children.only(n));var U=N?D&&"object"===typeof D&&D.ref:t,q=o(d.useIntersection({rootMargin:"200px"}),3),G=q[0],K=q[1],H=q[2],B=i.default.useCallback((function(e){I.current===Z&&A.current===R||(H(),I.current=Z,A.current=R),G(e),U&&("function"===typeof U?U(e):"object"===typeof U&&(U.current=e))}),[Z,U,R,H,G]);i.default.useEffect((function(){var e=K&&O&&r.isLocalURL(R),t="undefined"!==typeof T?T:S&&S.locale,n=_[R+"%"+Z+(t?"%"+t:"")];e&&!n&&h(S,R,Z,{locale:t})}),[Z,R,K,T,O,S]);var J={ref:B,onClick:function(e){N||"function"!==typeof j||j(e),N&&D.props&&"function"===typeof D.props.onClick&&D.props.onClick(e),e.defaultPrevented||function(e,t,n,o,a,s,l,c,u,d){if("A"!==e.currentTarget.nodeName.toUpperCase()||!function(e){var t=e.currentTarget.target;return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&r.isLocalURL(n)){e.preventDefault();var p=function(){"beforePopState"in t?t[a?"replace":"push"](n,o,{shallow:s,locale:c,scroll:l}):t[a?"replace":"push"](n,{forceOptimisticNavigation:!d})};u?i.default.startTransition(p):p()}}(e,S,R,Z,C,w,b,T,Boolean(L),O)},onMouseEnter:function(e){N||"function"!==typeof x||x(e),N&&D.props&&"function"===typeof D.props.onMouseEnter&&D.props.onMouseEnter(e),!O&&L||r.isLocalURL(R)&&h(S,R,Z,{priority:!0})},onTouchStart:function(e){N||"function"!==typeof P||P(e),N&&D.props&&"function"===typeof D.props.onTouchStart&&D.props.onTouchStart(e),!O&&L||r.isLocalURL(R)&&h(S,R,Z,{priority:!0})}};if(!N||g||"a"===D.type&&!("href"in D.props)){var Y="undefined"!==typeof T?T:S&&S.locale,z=S&&S.isLocaleDomain&&p.getDomainLocale(Z,Y,S.locales,S.domainLocales);J.href=z||f.addBasePath(l.addLocale(Z,Y,S&&S.defaultLocale))}return N?i.default.cloneElement(D,J):i.default.createElement("a",Object.assign({},k,J),n)}));t.default=y,("function"===typeof t.default||"object"===typeof t.default&&null!==t.default)&&"undefined"===typeof t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateContext=t.GlobalLayoutRouterContext=t.LayoutRouterContext=t.AppRouterContext=void 0;var o=(0,n(2648).Z)(n(7294)),a=o.default.createContext(null);t.AppRouterContext=a;var s=o.default.createContext(null);t.LayoutRouterContext=s;var i=o.default.createContext(null);t.GlobalLayoutRouterContext=i;var r=o.default.createContext(null);t.TemplateContext=r},7319:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return j},default:function(){return x}});var o=n(7568),a=n(7582),s=n(5893),i=n(7294),r=n(1043),l=n(2246),c=n(658),u=n.n(c),d=n(5789),p=n(9811),f=n(6042),_=n(9396),h=n(8177),y=n.n(h),v=n(1664),m=n.n(v),g=n(3570),C=n(1163),w=n.n(C),b=function(e){var t=e.setConfirmation,n=e.env,l=(0,r.I0)(),c=(0,C.useRouter)(),u=(0,r.v9)(d.uU),p=((0,r.v9)(d.dC),(0,r.v9)(d.wz),(0,r.v9)(d.jc)),h=(0,r.v9)(d.CS),v=(0,r.v9)(d.D0),w=(0,r.v9)(d.X7),b=w.paymentTypes,T=w.reservations,j=w.cookies,x=(0,i.useState)(""),P=x[0],E=x[1],N=(0,i.useState)(""),k=N[0],O=N[1],S=(0,i.useState)(""),L=S[0],D=S[1],M=(0,i.useState)(""),R=M[0],Z=M[1],A=(0,i.useRef)(null),I=function(){var e=(0,o.Z)((function(){var e,t,o,s,i,r,l,c=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:{},t=e.token,o=e.paymentType,s=e.stage,i=[T[0]],1===T[0].selectedPickupPoints.length&&1===T[1].selectedDropoffPoints.length&&(i=T),i=i.length>1?[(0,_.Z)((0,f.Z)({},i[0]),{paymentDetails:(0,_.Z)((0,f.Z)({},i[0].paymentDetails),{token:t,paymentType:o})}),(0,_.Z)((0,f.Z)({},i[1]),{paymentDetails:(0,_.Z)((0,f.Z)({},i[1].paymentDetails),{token:t,paymentType:o})})]:[(0,_.Z)((0,f.Z)({},i[0]),{paymentDetails:(0,_.Z)((0,f.Z)({},i[0].paymentDetails),{token:t,paymentType:o})})],r="".concat(n.apiDomain,"/api/v1/sessions/add"),[4,fetch(r,{method:"POST",body:JSON.stringify({token:p,details:i,stage:s}),headers:{"Content-Type":"application/json"}})];case 1:return[4,a.sent().json()];case 2:return l=a.sent(),console.log({data:l,reservationObj:i,stage:s}),[2]}}))}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.statusOfWindowCloseOrOpen,n=e.url;if("open"===t){var o="menubar=no,location=yes,toolbar=no,left=".concat(window.screen.width/2-275,",width=550,height=800"),a=null===window||void 0===window?void 0:window.open(n,"_blank",o);Z(a),A.current=a}if("close"===t){var s;if(A.current)null===(s=A.current)||void 0===s||s.close(),A.current=null;Z("")}},q=function(e){t(!1);try{var o=JSON.parse(b.filter((function(t){return t.id===e}))[0].pagePath).path,a="".concat(n.apiDomain).concat(o),s=0===parseInt(v)?[T[0].quotation]:[T[0].quotation,T[1].quotation],i=T[0].passengerDetails.email;console.log({passengerEmail:i}),1===e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.token,e.paymentType,I({token:"",paymentType:"",stage:"CLICK_OVER_CASH_BUTTON"}),O(""),l((0,g.tl)(1,"",c)),U({statusOfWindowCloseOrOpen:"close",url:""}),Z("")}({token:"",paymentType:e}),5===e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,o=e.quotations,a=e.passengerEmail,s=e.url;I({token:"",paymentType:5,stage:"CLICK_OVER_CARD_BUTTON"});var i="POST",r={"Content-Type":"application/json"},l=JSON.stringify({quotations:o,type:n,language:"en",passengerEmail:a,"session-id":j.sessionToken,mode:"sandbox"}),c={method:i,headers:r,body:l};try{if(!R){var u=window.open("about:blank","_blank","width=550,height=800");if(!u)return void alert("Popup blocked! Please check your browser settings.");u.document.write('\n        <html>\n          <head><title>PayPal</title></head>\n          <body style="text-align:center; padding:50px;">\n            <h3>"Loading the payment page...</h3>\n            <p>Please wait a few seconds.</p>\n          </body>\n        </html>\n      '),u.document.close(),fetch(s,c).then((function(e){return e.json()})).then((function(e){console.log({data:e}),t(!1),O(""),E(e),D(e.webSocketToken),u.location.href=e.href,Z(u)})).catch((function(e){u.close(),window.handelErrorLogs(e,"HGT PaymentMethods Component - paypalMethod function fetching catch blog  ",{config:c,url:s})}))}}catch(d){window.handelErrorLogs(d," HGT PaymentMethods Component - paypalMethod function try catch blog ",{id:n,quotations:o,passengerEmail:a,url:s})}}({id:e,quotations:s,passengerEmail:i,url:a}),7===e&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.quotations,o=e.passengerEmail,a=e.url;if(!k){I({token:"",paymentType:7,stage:"CLICK_OVER_CARD_BUTTON"});var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quotations:n,type:t,language:"en",passengerEmail:o,"session-id":j.sessionToken})};try{fetch(a,s).then((function(e){return e.json()})).then((function(e){E(e),D(null===e||void 0===e?void 0:e.webSocketToken),O(null===e||void 0===e?void 0:e.href),U({statusOfWindowCloseOrOpen:"close",url:""}),Z("")})).catch((function(e){console.log(e),window.handelErrorLogs(e,"HGT PaymentMethods Component - stripeMethod function fetching catch blog  ",{config:s,url:a})}))}catch(i){console.log(i),window.handelErrorLogs(i," HGT PaymentMethods Component - stripeMethod function try catch blog ",{id:t,quotations:n,passengerEmail:o,url:a})}}}({id:e,quotations:s,passengerEmail:i,url:a})}catch(r){window.handelErrorLogs(r,"HGT PaymentMethods Component -startPayment function trys catch blog",{id:e})}};return(0,i.useEffect)((function(){var e;return L&&(e=setInterval((0,o.Z)((function(){var t,o,s,i,r,u,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:"POST",t={"Content-Type":"application/json"},o=JSON.stringify({token:L}),s="".concat(n.apiDomain,"/api/v1/payment/status"),i={method:"POST",headers:t,body:o},a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(s,i)];case 2:return[4,a.sent().json()];case 3:return 200===(null===(r=a.sent())||void 0===r?void 0:r.status)&&(window.scroll({top:0,left:0,behavior:"smooth"}),U({statusOfWindowCloseOrOpen:"close",url:""}),D(""),R&&(null===R||void 0===R||R.close()),(null===P||void 0===P||null===(u=P.href)||void 0===u?void 0:u.includes("stripe"))&&(I({token:r.data.token,paymentType:7,stage:"GET_SUCCESS_CARD_PAYMENT"}),O(""),D(""),l((0,g.tl)(7,r.data.token,c))),(null===P||void 0===P||null===(d=P.href)||void 0===d?void 0:d.includes("paypal"))&&(I({token:r.data.token,paymentType:5,stage:"GET_SUCCESS_CARD_PAYMENT"}),l((0,g.tl)(5,r.data.token,c))),clearInterval(e)),[3,5];case 4:return p=a.sent(),"hgt  PaymentMethods Component - useEffect statusToken catch blog  ",window.handelErrorLogs(p,"hgt  PaymentMethods Component - useEffect statusToken catch blog  ",{config:i}),[3,5];case 5:return[2]}}))})),2e3)),function(){return clearInterval(e)}}),[L,R]),(0,i.useEffect)((function(){var e=setInterval((function(){A.current&&A.current.closed&&(console.log("\ud83e\ude9f PayPal window closed"),D(""),Z(""),A.current=null,clearInterval(e))}),1e3);return function(){return clearInterval(e)}}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"".concat(y().payment_details),children:[(0,s.jsxs)("div",{className:y().header,children:[(0,s.jsxs)("div",{className:y().header_top,children:[(0,s.jsx)("h2",{className:y().header_top_title,children:"How would you like to pay ?"}),(0,s.jsx)(m(),{href:"/terms",children:(0,s.jsxs)("a",{target:"_blank",className:y().header_top_subtitle,children:[(0,s.jsx)("i",{className:"fa-solid fa-check"}),"By proceeding, you agree to our"," ",(0,s.jsx)("span",{children:"terms and conditions"})]})})]}),(0,s.jsxs)("div",{className:y().header_tot_price,children:[(0,s.jsx)("p",{className:y().header_tot_price_text,children:"Total Price"}),(0,s.jsxs)("span",{className:y().header_tot_price_price,children:["\xa3",(null===u||void 0===u?void 0:u.price)&&(null===h||void 0===h?void 0:h.price)?Number(null===u||void 0===u?void 0:u.price)+Number(null===h||void 0===h?void 0:h.price):Number(null===u||void 0===u?void 0:u.price)||100]})]})]}),(0,s.jsxs)("div",{className:y().payment_list,children:[(null===k||void 0===k?void 0:k.length)>0?(0,s.jsx)("iframe",{src:k,className:y().iframe,frameBorder:"0",allow:"payment"}):(0,s.jsx)(i.Fragment,{}),(0,s.jsxs)("div",{className:"".concat(y().items_buttons),children:[(0,s.jsxs)("div",{title:"Pay with Cash to Driver",className:" ".concat(y().item," ").concat(y().item_1),onClick:function(){return q(1)},children:[(0,s.jsx)("p",{children:"Pay With Cash  To The Driver "}),(0,s.jsx)("img",{src:"/images/pp.jpg",alt:""})]}),(0,s.jsxs)("div",{className:"".concat(y().item," ").concat(y().item_2," "),onClick:function(){return q(5)},title:"Pay with Paypal",children:[(0,s.jsx)("p",{children:"Pay by Paypal"}),(0,s.jsx)("img",{src:"/images/paypal.png",alt:""})]}),(0,s.jsxs)("div",{title:"Pay with Stripe",className:"".concat(y().item," ").concat(y().item_4),onClick:function(){return q(7)},children:[(0,s.jsx)("p",{children:"Pay by Card "}),(0,s.jsx)("img",{src:"/images/vsMaster.jpg",alt:""})]})]})]})]})})},T=n(8348),j=!0,x=function(e){var t=e.env,n=(0,r.v9)(d.X7).reservations,c=(0,r.v9)(d.l3),f=(0,r.v9)(d.eI),_=(0,r.v9)(d.uU),h=(0,r.v9)(d.Vo),y=(0,i.useState)(!0),v=y[0],m=y[1],g=(0,r.v9)(d.bp),C=(0,r.v9)(d.dC),j=(0,r.v9)(d.wz),x=(0,r.v9)(d.Dp),P=(0,r.v9)(d.NF),E=(0,r.I0)(),N=(0,r.v9)(d.Kt),k=(0,r.v9)(d.ZW),O=(0,r.v9)(d.o2),S=(0,r.v9)(d.h_),L=(0,r.v9)(d.z8),D=(0,r.v9)(d.CS),M=(0,r.v9)(d.Cg),R=(0,r.v9)(d.UE),Z=(0,r.v9)(d.K6),A=(0,r.v9)(d.On),I=(0,r.v9)(d.jc),U=((0,r.v9)(d.D0),function(){var e=(0,o.Z)((function(){var e,o,s,i,r,l=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},o=e.stage,s=[n[0]],1===n[0].selectedPickupPoints.length&&1===n[1].selectedDropoffPoints.length&&(s=n),i="".concat(t.apiDomain,"/api/v1/sessions/add"),[4,fetch(i,{method:"POST",body:JSON.stringify({token:I,details:s,stage:o}),headers:{"Content-Type":"application/json"}})];case 1:return[4,a.sent().json()];case 2:return r=a.sent(),console.log({data:r,reservationObj:s,stage:o}),[2]}}))}));return function(){return e.apply(this,arguments)}}());return(0,i.useEffect)((function(){U({stage:"LANDED_INTO_PAYMENT_PAGE"}),function(e){var o="".concat(t.apiDomain,"/api/v1/drivers/meet-point"),a={method:"POST",body:JSON.stringify({point:n[0].selectedPickupPoints[0]}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}};fetch(o,a).then((function(e){return e.json()})).then((function(e){E({type:T.DR,payload:e.data["meet-point"]})})).catch((function(e){console.log(e)}))}(),window.scroll({top:48,left:0,behavior:"smooth"}),E({type:"CHECK_JOURNEY_TYPE",payload:f.length>=1&&S.length>=1?1:0})}),[]),(0,i.useEffect)((function(){var e="If you leave the page, all data will be deleted.",s=function(){var t=(0,o.Z)((function(t){return(0,a.__generator)(this,(function(n){return setTimeout((function(){U({stage:"PLAN_TO_CLOSE_PAYMENT_PAGE"})}),10),window.event.cancelable&&setTimeout((function(){U({stage:"PAYMENT_PAGE_NOT_CLOSED"})}),450),v?((t||window.event).returnValue=e,[2,e]):[2]}))}));return function(e){return t.apply(this,arguments)}}(),i=function(t){if(v){if("/reservations-document"===t||"/transfer-details"===t)return void m(!1);if(m(!0),w().pathname!==t&&!confirm(e))throw w().events.emit("routeChangeError"),'Route change to "'.concat(t,'" was aborted (this error can be safely ignored). See https://github.com/zeit/next.js/issues/2476.')}},r=function(){var e=(0,o.Z)((function(){var e,o,s,i,r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return(e=new Headers).append("Content-Type","application/json"),"POST",o=n,s="".concat(t.apiDomain,"/api/v1/sessions/add"),i=JSON.stringify({token:I,details:o,stage:"PAYMENT_PAGE_IS_CLOSED"}),[4,fetch(s,{method:"POST",body:i,headers:e,keepalive:!0})];case 1:return[4,a.sent().json()];case 2:return r=a.sent(),console.log({data:r}),[2]}}))}));return function(){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",s),window.addEventListener("unload",r),w().events.on("routeChangeStart",i),function(){window.removeEventListener("beforeunload",s),window.removeEventListener("unload",r),w().events.off("routeChangeStart",i)}}),[v]),(0,s.jsx)(l.Z,{title:"Step 3 | Payment",keywords:"Step 3 | Payment",description:"Step 3 | Payment",children:(0,s.jsx)("div",{className:u().payment_section,children:(0,s.jsx)("div",{className:u().section,children:(0,s.jsxs)("div",{className:u().payment_container,children:[(0,s.jsxs)("div",{className:u().passenger_details,children:[(0,s.jsx)("div",{className:u().payment_details_header,children:(0,s.jsx)("h5",{children:" Journey Details"})}),(0,s.jsx)(p.default,{date:h,quot:_,pickUps:c,drops:f,fullName:g,email:C,phone:j,passengers:x,specialRequest:P,env:t})]}),D&&S.length>0&&L.length>0&&(0,s.jsxs)("div",{className:u().passenger_details,children:[(0,s.jsx)("div",{className:u().payment_details_header,children:(0,s.jsx)("h5",{children:"Return Details"})}),(0,s.jsx)(p.default,{date:M,quot:D,pickUps:S,drops:L,fullName:A?g:N,email:A?C:k,phone:A?j:O,passengers:A?x:R,specialRequest:Z,env:t})]}),(0,s.jsx)(b,{setConfirmation:m,env:t})]})})})})}},8177:function(e){e.exports={payment_details:"styles_payment_details__GDSMJ",header:"styles_header__F_hCB",header_top_title:"styles_header_top_title__fxm3N",header_top_subtitle:"styles_header_top_subtitle__RYrK9",header_tot_price:"styles_header_tot_price__3kiYK",header_tot_price_text:"styles_header_tot_price_text__yZZMW",header_tot_price_price:"styles_header_tot_price_price__bX065",payment_list:"styles_payment_list__8ZFal",iframe:"styles_iframe__33ktR",items_buttons:"styles_items_buttons__NMp_T",item:"styles_item__CdBSz",item_1:"styles_item_1__LSx8i",item_2:"styles_item_2__gVK2Z",item_3:"styles_item_3__Gwhet",item_4:"styles_item_4__4dddm",modal:"styles_modal__y1JSK",zoomout:"styles_zoomout__i2hZ_",modal_container:"styles_modal_container__LIkng",button_div:"styles_button_div__KMlwT"}},658:function(e){e.exports={payment_section:"styles_payment_section__9ClYt",section:"styles_section__U3nf_",payment_container:"styles_payment_container__Cs6l4",passenger_details:"styles_passenger_details__uqXZb",payment_details_header:"styles_payment_details_header__N_DGi"}},1664:function(e,t,n){e.exports=n(8418)}},function(e){e.O(0,[345,246,570,811,774,888,179],(function(){return t=485,e(e.s=t);var t}));var t=e.O();_N_E=t}]);